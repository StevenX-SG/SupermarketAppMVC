<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FairPrime Market - Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<%- include('partials/header') %>

<div class="container mt-4">
  <h2 class="mb-4">Checkout</h2>

  <form action="/checkout" method="POST">
    <div class="row">
      <!-- LEFT: address + delivery + payment -->
      <div class="col-md-7 mb-4">
        <div class="border rounded p-3 mb-3">
          <h5 class="mb-2">Delivery Address</h5>
          <textarea name="address" class="form-control" rows="3"
                    placeholder="Enter your delivery address"><%= user.address || '' %></textarea>
        </div>

        <div class="border rounded p-3 mb-3">
          <h5 class="mb-2">Delivery Option</h5>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="deliveryOption"
                   id="del-standard" value="standard" checked>
            <label class="form-check-label" for="del-standard">Standard (3–5 days)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="deliveryOption"
                   id="del-express" value="express">
            <label class="form-check-label" for="del-express">Express (1–2 days)</label>
          </div>
        </div>

        <div class="border rounded p-3 mb-3">
          <h5 class="mb-2">Payment Method</h5>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="paymentMethod"
                   id="pm-card" value="card" checked>
            <label class="form-check-label" for="pm-card">Credit / Debit Card</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="paymentMethod"
                   id="pm-wallet" value="wallet">
            <label class="form-check-label" for="pm-wallet">Digital Wallet (GrabPay / PayNow)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="paymentMethod"
                   id="pm-cod" value="cod">
            <label class="form-check-label" for="pm-cod">Cash on Delivery</label>
          </div>
        </div>
      </div>

      <!-- RIGHT: order summary -->
      <div class="col-md-5">
        <div class="border rounded p-3 mb-3">
          <h5 class="mb-3">Order Summary</h5>

          <ul class="list-group mb-3">
            <% cartItems.forEach(item => { %>
              <li class="list-group-item d-flex justify-content-between">
                <span><%= item.productName %> × <%= item.quantity %></span>
                <span>$<%= (item.price * item.quantity).toFixed(2) %></span>
              </li>
            <% }) %>
          </ul>

          <p class="d-flex justify-content-between">
            <span>Subtotal</span>
            <span>$<%= subtotal.toFixed(2) %></span>
          </p>
          <p class="d-flex justify-content-between">
            <span>GST (9%)</span>
            <span>$<%= (subtotal * 0.09).toFixed(2) %></span>
          </p>
          <hr>
          <h5 class="d-flex justify-content-between">
            <span>Total</span>
            <span>$<%= (subtotal * 1.09).toFixed(2) %></span>
          </h5>

          <button type="submit" class="btn btn-success w-100 mt-3">Place Order</button>
          <a href="/cart" class="btn btn-outline-secondary w-100 mt-2">Back to Cart</a>
        </div>
      </div>
    </div>
  </form>
</div>

<%- include('partials/footer') %>
</body>
</html>
